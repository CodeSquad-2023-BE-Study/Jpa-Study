# ê¸°ë³¸ í‚¤ ë§¤í•‘ì— ëŒ€í•œ ì´ëª¨ì €ëª¨ ì¡ë‹¤í•œ ê²ƒë“¤

## ğŸ’â€â™€ï¸Â Hibernateì—ì„œ `UUIDGenerator` ì‚¬ìš©ë²•
- ì´ì œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì†ì‰½ê²Œ UUIDë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Entity
public class Course {

    @Id
    @GeneratedValue
    private UUID courseId;

    // ...
}
```
- [ì°¸ê³  ë§í¬](https://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#identifiers-generators-uuid)

## ğŸ’â€â™€ï¸Â Hibernate ì˜ SequenceStyleGenerator

- ë°ì´í„°ë² ì´ìŠ¤ê°€ ì§€ì›í•˜ëŠ” ê²½ìš°, ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸í‚¤ë¥¼ ìƒì„±
- ë§Œì•½ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, í…Œì´ë¸” ìƒì„±ìœ¼ë¡œ ì „í™˜ (ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ë‹¤.)

```java
@Entity
public class User {
    @Id
    @GeneratedValue(generator = "sequence-generator")
    @GenericGenerator(
      name = "sequence-generator",
      strategy = "org.hibernate.id.enhanced.SequenceStyleGenerator",
      parameters = {
        @Parameter(name = "sequence_name", value = "user_sequence"),
        @Parameter(name = "initial_value", value = "4"),
        @Parameter(name = "increment_size", value = "1")
        }
    )
    private long userId;
    
    // ...
}
```

- *`SEQUENCE`ëŠ”*Â Hibernate ë¬¸ì„œì—ì„œ ê¶Œì¥í•˜ëŠ” ìƒì„± ìœ í˜•ì…ë‹ˆë‹¤.

## ğŸ’â€â™€ï¸Â `@Id` Primitive Typeê³¼ Wrapper Type ë­˜ë¡œ ì“°ì§€?

> *We recommend that you declare consistently-named identifier attributes on persistent classes and that you use a nullable (i.e., non-primitive) type.*
> 

ì˜êµ¬ í´ë˜ìŠ¤ì—ì„œ ì¼ê´€ë˜ê²Œ ì´ë¦„ì´ ì§€ì •ëœ ì‹ë³„ì íŠ¹ì„±ì„ ì„ ì–¸í•˜ê³  nullì„ í—ˆìš©í•˜ëŠ”(ì¦‰, ê¸°ë³¸ì´ ì•„ë‹Œ) ìœ í˜•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

- [ì°¸ê³ ë§í¬](https://docs.jboss.org/hibernate/orm/5.3/userguide/html_single/Hibernate_User_Guide.html#entity-pojo-identifier)

## ğŸ’â€â™€ï¸Â `spring.jpa.hibernate.use-new-id-generator-mapping` ê¸°ë³¸ê°’ì€ ì´ì œ `true`ì…ë‹ˆë‹¤.

- Spring BootëŠ” Hibernateì˜ id ìƒì„± ì „ëµì„ ê·¸ëŒ€ë¡œ ë”°ë¼ê°ˆì§€ ë§ì§€ë¥¼ ê²°ì •í•˜ëŠ”Â `useNewIdGeneratorMappings`
- ë§Œì•½ ì´ê²Œ falseì˜€ë‹¤ë©´
    - MySQLì˜ AUTOëŠ” IDENTITY
- trueê°€ ë˜ì—ˆìœ¼ë¯€ë¡œ
    - MySQLì˜ AUTOê°€ TABLEì´ ì„ íƒì´ ë©ë‹ˆë‹¤.

![image](https://github.com/CodeSquad-2023-BE-Study/Jpa-Study/assets/103120173/419f2da5-f85d-4fb3-8ffb-e7aac7b7cf91)
- [ì´ë¯¸ì§€ ì¶œì²˜](https://www.popit.kr/%ED%95%98%EC%9D%B4%EB%B2%84%EB%84%A4%EC%9D%B4%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9E%90%EB%8F%99-%ED%82%A4-%EC%83%9D%EC%84%B1-%EC%A0%84%EB%9E%B5%EC%9D%84-%EA%B2%B0%EC%A0%95%ED%95%98/)
 
- [ì°¸ê³ ë§í¬](https://jojoldu.tistory.com/295)

## ğŸ’â€â™€ï¸Â (ë” ì¡ë‹¤í•œ ì´ì•¼ê¸°) MySQLì€ Identity ì „ëµì„ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ?

> *With no argument, LAST_INSERT_ID() returns a BIGINT UNSIGNED (64-bit) value representing the first automatically generated value successfully inserted for an AUTO_INCREMENT column as a result of the most recently executed INSERT statement.*
> 
- `LAST_INSERT_ID()` í•¨ìˆ˜ê°€ ìˆë‹¤ê³  í•©ë‹ˆë‹¤.

- [ì°¸ê³ ë§í¬](https://blog.leocat.kr/notes/2017/07/22/mysql-ibatis-fetch-pk-after-insert)

---
## Refs.
- ìë°” ORM í‘œì¤€ JAP í”„ë¡œê·¸ë˜ë°
- https://jstobigdata.com/jpa/identifiers-overview-primary-key-generation-strategy/
- https://www.popit.kr/%ED%95%98%EC%9D%B4%EB%B2%84%EB%84%A4%EC%9D%B4%ED%8A%B8%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%9E%90%EB%8F%99-%ED%82%A4-%EC%83%9D%EC%84%B1-%EC%A0%84%EB%9E%B5%EC%9D%84-%EA%B2%B0%EC%A0%95%ED%95%98/
- https://www.baeldung.com/hibernate-identifiers
- https://vladmihalcea.com/why-should-not-use-the-auto-jpa-generationtype-with-mysql-and-hibernate/
